window.Theme=window.Theme||{init:function(){Theme.Turbolinks.init(),this.reload()},reload:function(){Theme.$={html:$("html"),body:$("body")},Theme.themeData=_4ORMAT_DATA,this.initJSForPageType(),Theme.Menu.init()},initJSForPageType:function(){var e=this.normalizedPageType();window.Theme.hasOwnProperty(e)&&window.Theme[e].init()},normalizedPageType:function(){return Theme.themeData.page.hasOwnProperty("nested")?Theme.themeData.page.nested.type.charAt(0).toUpperCase()+Theme.themeData.page.nested.type.slice(1):Theme.themeData.page.type.charAt(0).toUpperCase()+Theme.themeData.page.type.slice(1)},fadeInContent:function(){setTimeout(function(){Theme.$.html.removeClass("is-hidden")},300)}},window.Theme.Turbolinks=window.Theme.Turbolinks||{init:function(){$(document).on("page:update",this.onUpdate.bind(this)),$(document).on("page:before-change",this.onBeforeChange.bind(this)),$(document).on("page:change",this.onPageChange.bind(this)),$(document).on("page:load",this.onPageLoad.bind(this)),$(document).on("page:restore",this.onRestore.bind(this))},onBeforeChange:function(){Theme.$.html.addClass("is-changing")},onPageChange:function(){setTimeout(function(){Theme.$.html.removeClass("is-changing")},1e3)},onUpdate:function(){},onPageLoad:function(){Theme.reload()},onRestore:function(){}},window.Theme.Menu=window.Theme.Menu||{init:function(){var e=this;enquire.register(Media.LARGER_THAN_TABLET,{match:e.desktop.init,unmatch:e.desktop.destroy}),enquire.register(Media.SMALLER_THAN_TABLET,{match:e.mobile.init,unmatch:e.mobile.destroy})},desktop:{init:function(){var e=Theme.Menu.desktop;$(".menu-nav .active").not(".category_name").length&&$(".menu-nav .active").closest(".category").find(".category_name").addClass("active"),$("body").removeClass("locked"),$(".category_name").on("click",e.onCategoryClick),$(window).on("resize",e.menuLinks),e.menuLinks(),$(".menu-nav .item .active").prev().addClass("active")},destroy:function(){var e=Theme.Menu.desktop;$(".category_name").off("click",e.onCategoryClick),$(window).off("resize",e.menuLinks)},onCategoryClick:function(e){e.preventDefault(),$(".category_name").not($(this)).removeClass("active"),$(this).toggleClass("active")},menuLinks:function(){Theme.Menu.desktop;var e=$(".menu-nav"),t=$(".category_name");if("left"===$(".menu-nav .top_level").css("float"))t.data("events")&&(t.off("click").removeClass("active"),e.toggleClass("hor")),e.css("max-height","none");else{$(".category_name").data("events")||e.toggleClass("hor");var i=$(".menu-logo").outerHeight(!0)+$(".menu-footer").outerHeight();e.css("max-height","calc(100% - "+i+"px)")}}},mobile:{SCROLL_THRESHOLD:10,$menu:null,$panel:null,init:function(){var e=Theme.Menu.mobile,t=e.$menu=$(".menu"),i=(e.$panel=$(".mobile-menu-panel"),$("#wrapper")),n=$(".mobile-menu-open-button"),a=$(".mobile-menu-close-button"),o=$(".mobile-menu-links"),s=$(".mobile-menu-social-links");i.css("top",t.outerHeight()+"px"),a.css("top",n.position().top+"px"),n.on("click",e.open),a.on("click",e.close),$(window).on("scrolldelta",e.onScroll),Theme.$.html.hasClass("cart-enabled")?o.css("padding-bottom",50+s.outerHeight()+"px"):o.css("padding-bottom",s.outerHeight()+"px")},destroy:function(){var e=Theme.Menu.mobile,t=($(".mobile-menu-panel"),$(".mobile-menu-open-button")),i=$(".mobile-menu-close-button");$("#wrapper").css("top",""),t.off("click",e.open),i.off("click",e.close),$(window).off("scrolldelta",e.onScroll)},open:function(e){var t=Theme.Menu.mobile;$(".mobile-menu-links");e&&e.preventDefault(),$(".mobile-menu-links").on("touchmove",t.stopPropagation),$("body").on("touchmove",t.preventDefault),$("body").addClass("locked"),$(".mobile-menu").addClass("active"),$(".mobile-menu-overlay").on("click",t.close)},close:function(e){var t=Theme.Menu.mobile;e&&e.preventDefault(),$(".mobile-menu").removeClass("active"),$(".mobile-menu-overlay").off("click",t.close),$(".mobile-menu-links").off("touchmove",t.stopPropagation),$("body").off("touchmove",t.preventDefault),$("body").removeClass("locked")},onScroll:function(e){var t=Theme.Menu.mobile,i=e.scrollTopDelta;if(t.$panel.is(":visible"))return 1<i&&i>=t.SCROLL_THRESHOLD&&0<e.scrollTop?t.$menu.addClass("hidden"):i<1&&i<=-1*t.SCROLL_THRESHOLD&&t.$menu.removeClass("hidden"),0===e.scrollTop?t.$menu.removeClass("hidden"):void 0},preventDefault:function(e){e.preventDefault()},stopPropagation:function(e){e.stopPropagation()}}},window.Theme.Gallery=window.Theme.Gallery||{slider:undefined,last_clicked:undefined,index_of_last_clicked:0,animating:!1,gallery_top_margin:0<$(".js_max_height_target").length?$(".js_max_height_target").offset().top:null,$captionContent:null,animationOptions:{effect:{slide:"slide",fade:"fade"},speed:{slow:800,normal:400,fast:300}},init:function(){var e=this;enquire.register(Media.LARGER_THAN_TABLET,{match:e.desktop.init,unmatch:e.desktop.destroy,setup:e.desktop.setup,deferSetup:!0}),enquire.register(Media.SMALLER_THAN_TABLET,{match:e.mobile.init,unmatch:e.mobile.destroy,setup:e.mobile.setup,deferSetup:!0})},desktop:{setup:function(){Theme.Gallery},init:function(){var e=Theme.Gallery;e.slider=e.createSlideshow(".flexslider"),$(".asset.video.has_caption").each(function(){$(this).css("margin-bottom","0px")})},destroy:function(){var e=Theme.Gallery;e.slider&&e.destroySlideshow(e.slider)}},mobile:{setup:function(){Theme.Gallery},init:function(){$(".asset .video").each(function(e,t){var i=$(t),n=i.find(".load_iframe"),a=$('<iframe width="100%" height="100%" frameborder="0"></iframe>');a.attr("src",n.attr("href").replace(/&autoplay=1/g,"")),i.append(a);var o=1/i.data("video-ratio")*100;i.css("padding-top",o+"%")}),$(".asset.video.has_caption").each(function(){var e=$(this),t=$(this).find(".copy").outerHeight();e.css("margin-bottom",t+"px")})},destroy:function(){$(".asset .video").each(function(e,t){var i=$(t);i.find("iframe").remove(),i.css("padding-top","")})}},createSlideshow:function(e){if($(".assets_container").size()){Theme.Gallery;var t=0;location.hash.match(/^#[0-9]+/)&&(t=location.hash.slice(1)-1);var i=parseInt(t||0,10),r=Theme.Gallery.getSpeed(),a=Theme.Gallery.getEffect(),n=_4ORMAT_DATA.page.assets.some(function(e){return"video"===e.type});$("#total").text($(".flexslider .asset").length),$("#current").text(i+1),Theme.Gallery.$captionContent=$("#caption-content");var o=!1,s=$(e).flexslider({controlNav:!1,animation:a,animationSpeed:r,easing:"easeOutQuad",startAt:i,slideshow:!1,animationLoop:!0,keyboard:!1,video:n,start:function(){Theme.Gallery.index_of_last_clicked=i,Theme.Gallery.set_url_index(i),$(".asset img, .asset .preview").on("click",function(e){var t=$(e.target);t.hasClass("bg")||t.hasClass("load_iframe")||t.hasClass("button")||t.hasClass("dont-move")||t.hasClass("txt")||t.parents(".txt").length||t.parents(".title.only_text").length||t.hasClass("title")||($(".pagination .thumb_item.active").next().length?$(".pagination .thumb_item.active").next():$(".pagination .thumb_item:first")).find("a").trigger("click",[!1])});var a=$(".pagination"),e=$(".gallery-navigation"),o=e.find(".navigation"),s=e.find(".title"),l=!1;$(".open-close-thumbs").on("click",function(e,t){e.preventDefault(),t=void 0===t||t;var i=parseInt(a.css("left"),10),n=$(".flexslider").position().top;t&&(0!==i||a.is(":animated")?a.is(":animated")||($(".flexslider").stop(!0,!0).animate({opacity:0},r),a.css({left:0,top:n}).stop(!0,!0).animate({opacity:1},r),o.hide(),s.html(_4ORMAT_DATA.page.name).show(),$(this).removeClass("icon-grid").addClass("icon-close"),l=!l):($(".flexslider").stop(!0,!0).animate({opacity:1},r),a.stop(!0,!0).animate({opacity:0},r,function(){a.css({left:"-100%",top:"-9000em"})}),s.hide(),o.show(),$(this).removeClass("icon-close").addClass("icon-grid"),l=!l),$("iframe").remove())}),"Thumbnails"==_4ORMAT_DATA.theme.gallery_default&&767<$(window).width()&&(0==i?($(".open-close-thumbs").trigger("click"),setTimeout(function(){$("body.gallery #assets").animate({opacity:1},r)},200)):$("body.gallery #assets").animate({opacity:1},r)),$(".thumb_container").on("click","a",function(e,t){e.preventDefault(),t=void 0===t||t;var i=$(this).parent(),n=i.index();Theme.Gallery.index_of_last_clicked=n,d&&d.flexslider(n),$(".thumb_container .active").removeClass("active"),i.addClass("active"),setTimeout(function(){$(".open-close-thumbs").trigger("click",[t])},r)});var t={next:function(e){(e.preventDefault(),$(".assets_container ").is(":animated")||$(".pagination .active").index()!=d.data("flexslider").currentSlide)||($(".pagination .active").next().length?$(".pagination .active").next():$(".pagination .thumb_item").first()).find("a").trigger("click",[!1])},prev:function(e){(e.preventDefault(),$(".assets_container ").is(":animated")||$(".pagination .active").index()!=d.data("flexslider").currentSlide)||($(".pagination .active").prev().length?$(".pagination .active").prev():$(".pagination .thumb_item").last()).find("a").trigger("click",[!1])}};$(document).on("keydown",function(e){Theme.Gallery.animating||("39"!=e.which||l||t.next(e),"37"!=e.which||l||t.prev(e),"27"==e.which&&"1"==$(".pagination").css("opacity")&&(e.preventDefault(),$(".open-close-thumbs").trigger("click")))}),$(".next").on("click",t.next),$(".prev").on("click",t.prev),$(".thumb_container .thumb_item").eq(i).find("a").trigger("click",[!1]),$(".load_iframe").addClass("icon-video").parent().append('<div class="layer"></div>'),Theme.Gallery.$captionContent.html($(".flex-active-slide").find(".caption").html()).fadeIn(r),$(window).trigger("resize"),1==$(".asset").not(".clone").length&&$(".assets_container .image span > img").css("cursor","default"),$('img[nopin=""]').attr("nopin","true"),$(".flex-active-slide").find("img").attr("nopin","")},before:function(e){var t=Theme.Gallery,i=$(e.slides[e.currentSlide]),n=$(e.slides[e.animatingTo]);i.addClass("js_slider_previous"),t.animating=!0,t.set_url_index(t.index_of_last_clicked),$("#current").text(e.animatingTo+1),$("iframe").remove(),"slide"==a?t.$captionContent.hide().html(""):(t.$captionContent.stop().fadeOut(r,function(){Theme.Gallery.animating&&t.$captionContent.html("")}),window.matchMedia(Media.LARGER_THAN_TABLET).matches&&"ontouchstart"in window&&t.$captionContent.html("")),Theme.Gallery.setVideoDimension(n.get(0)),o=!1},after:function(e){if(!o){o=!0,$(".js_slider_previous").removeClass("js_slider_previous"),Theme.Gallery.animating=!1,Theme.Gallery.setSliderHeight(e),Theme.Gallery.setSliderCaptionMaxWidth(),Theme.Gallery.$captionContent.stop().html($(".flex-active-slide").find(".caption").html()).fadeIn(r),$('img[nopin=""]').attr("nopin","true"),$(".flex-active-slide").find("img").attr("nopin","");var t=$(e.slides[e.currentSlide+1]);t.find(".lazyload").length&&lazySizes.loader.unveil(t.find(".lazyload")[0])}}}),d=s.data("flexslider");return $(window).on("resize",function(){Theme.Gallery.setThumbPosition(),Theme.Gallery.setVideoDimension(),Theme.Gallery.setSliderHeight(d)}),Theme.Gallery.setSliderCaptionMaxWidth(),s}},destroySlideshow:function(e){var t=e.data("flexslider");$(".asset img, .asset .preview").off("click"),t.find(".clone").remove(),$(".flex-direction-nav").remove(),"fade"!==t.vars.animation&&t.container.unwrap(),t.slides.filter("active-slide").removeClass(t.vars.namespace+"active-slide"),t.removeAttr("style"),t.slides.removeAttr("style"),t.container.removeAttr("style"),t.stop(),t.removeData("flexslider")},set_url_index:function(e){var t="#"+(e+1);location.hash!=t&&(location.hash=t)},maxItemHeight:function(){return 840<$(window).width()?$(window).height()-this.gallery_top_margin-80:$(window).height()-50},getSpeed:function(){var e=_4ORMAT_DATA.theme.gallery_change_image_speed,t=Theme.Gallery.animationOptions.speed.normal;return Theme.Gallery.animationOptions.speed[e.toLowerCase()]||t},getEffect:function(){var e=_4ORMAT_DATA.theme.transition_effect,t=Theme.Gallery.animationOptions.speed.fade;return Theme.Gallery.animationOptions.effect[e.toLowerCase()]||t},setThumbPosition:function(){var e=Math.floor($(".pagination .thumb_item").width());$(".thumb_item, .video img",".pagination").height(e),_4ORMAT_DATA.theme.thumbnails_shape||$(".thumb_item.image img, .thumb_item canvas",".pagination").css("max-height",e)},setSliderHeight:function(e){var t=$(".flexslider"),i=$(e.slides[e.currentSlide]),n=i.find("img");if(i.hasClass("text"))t.css("height","");else if("slide"===Theme.Gallery.getEffect()&&n.length){if(n.height()<2)return;$(".flexslider").stop(!0,!0).css("height",n.height())}},setSliderCaptionMaxWidth:function(){var e=$(".flex-active-slide");if(!e.hasClass("txt")){if(e.hasClass("video"))var t=e.find(".video").data("video-ratio"),i=e.height()*t;else t=e.find("img").data("ratio"),i=e.height()/t;i<1?Theme.Gallery.$captionContent.css("max-width",""):Theme.Gallery.$captionContent.css("max-width",i+"px")}},setVideoDimension:function(e){var t=e?$(e).find(".video span"):$(".asset.video.flex-active-slide span");if(0===t.length)return!1;var i=Theme.Gallery.maxItemHeight(),n=Number(t.parent().attr("data-video-ratio"));i<$(Theme.Gallery.slider).width()/n&&(t.addClass("portrait-ratio"),t.css({padding:0,height:i,width:i*n}))}},window.Theme.Listing=window.Theme.Listing||{init:function(){$("._4ORMAT_content_wrapper").removeClass("content-loaded"),$(".page-asset").each(function(e){var t=$(this);setTimeout(function(){t.addClass("asset-loaded")},100*e)}),$(".title-element").each(function(){$(this).addClass("asset-loaded")})}},window.Theme.Content=window.Theme.Content||{init:function(){}};var Media={LARGER_THAN_TABLET:"screen and (min-width: 768px)",SMALLER_THAN_TABLET:"screen and (max-width: 767px)"};$(document).on("DOMContentLoaded",function(){Theme.init()});